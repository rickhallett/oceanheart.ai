[Skip to content](https://github.com/openai/openai-python#start-of-content)

You signed in with another tab or window. [Reload](https://github.com/openai/openai-python) to refresh your session.You signed out in another tab or window. [Reload](https://github.com/openai/openai-python) to refresh your session.You switched accounts on another tab or window. [Reload](https://github.com/openai/openai-python) to refresh your session.Dismiss alert

[openai](https://github.com/openai)/ **[openai-python](https://github.com/openai/openai-python)** Public

- [Notifications](https://github.com/login?return_to=%2Fopenai%2Fopenai-python) You must be signed in to change notification settings
- [Fork\\
3.6k](https://github.com/login?return_to=%2Fopenai%2Fopenai-python)
- [Star\\
24.6k](https://github.com/login?return_to=%2Fopenai%2Fopenai-python)


The official Python library for the OpenAI API


[pypi.org/project/openai/](https://pypi.org/project/openai/ "https://pypi.org/project/openai/")

### License

[Apache-2.0 license](https://github.com/openai/openai-python/blob/main/LICENSE)

[24.6k\\
stars](https://github.com/openai/openai-python/stargazers) [3.6k\\
forks](https://github.com/openai/openai-python/forks) [Branches](https://github.com/openai/openai-python/branches) [Tags](https://github.com/openai/openai-python/tags) [Activity](https://github.com/openai/openai-python/activity)

[Star](https://github.com/login?return_to=%2Fopenai%2Fopenai-python)

[Notifications](https://github.com/login?return_to=%2Fopenai%2Fopenai-python) You must be signed in to change notification settings

# openai/openai-python

main

[**12** Branches](https://github.com/openai/openai-python/branches) [**243** Tags](https://github.com/openai/openai-python/tags)

[Go to Branches page](https://github.com/openai/openai-python/branches)[Go to Tags page](https://github.com/openai/openai-python/tags)

Go to file

Code

## Folders and files

| Name | Name | Last commit message | Last commit date |
| --- | --- | --- | --- |
| ## Latest commit<br>[![stainless-app[bot]](https://avatars.githubusercontent.com/in/378072?v=4&size=40)](https://github.com/apps/stainless-app)[stainless-app\[bot\]](https://github.com/openai/openai-python/commits?author=stainless-app%5Bbot%5D)<br>[release: 1.63.0](https://github.com/openai/openai-python/commit/720ae54414f392202289578c9cc3b84cccc7432c)<br>Feb 13, 2025<br>[720ae54](https://github.com/openai/openai-python/commit/720ae54414f392202289578c9cc3b84cccc7432c) · Feb 13, 2025<br>## History<br>[816 Commits](https://github.com/openai/openai-python/commits/main/) |
| [.devcontainer](https://github.com/openai/openai-python/tree/main/.devcontainer ".devcontainer") | [.devcontainer](https://github.com/openai/openai-python/tree/main/.devcontainer ".devcontainer") | [chore(ci): update rye to v0.35.0 (](https://github.com/openai/openai-python/commit/94fc49d8b198b4b9fe98bf22883ed82b060e865b "chore(ci): update rye to v0.35.0 (#1523)") [#1523](https://github.com/openai/openai-python/pull/1523) [)](https://github.com/openai/openai-python/commit/94fc49d8b198b4b9fe98bf22883ed82b060e865b "chore(ci): update rye to v0.35.0 (#1523)") | Jul 3, 2024 |
| [.github](https://github.com/openai/openai-python/tree/main/.github ".github") | [.github](https://github.com/openai/openai-python/tree/main/.github ".github") | [chore(internal): minor formatting changes (](https://github.com/openai/openai-python/commit/27d0e67b1d121ccc5b48c95e1f0bc3f6e93e9bd3 "chore(internal): minor formatting changes (#2050)") [#2050](https://github.com/openai/openai-python/pull/2050) [)](https://github.com/openai/openai-python/commit/27d0e67b1d121ccc5b48c95e1f0bc3f6e93e9bd3 "chore(internal): minor formatting changes (#2050)") | Jan 24, 2025 |
| [.inline-snapshot/external](https://github.com/openai/openai-python/tree/main/.inline-snapshot/external "This path skips through empty directories") | [.inline-snapshot/external](https://github.com/openai/openai-python/tree/main/.inline-snapshot/external "This path skips through empty directories") | [chore(internal): update test snapshots (](https://github.com/openai/openai-python/commit/9feadd8274809fff9ff1e36a0c90d45566ed46e2 "chore(internal): update test snapshots (#1749)") [#1749](https://github.com/openai/openai-python/pull/1749) [)](https://github.com/openai/openai-python/commit/9feadd8274809fff9ff1e36a0c90d45566ed46e2 "chore(internal): update test snapshots (#1749)") | Sep 26, 2024 |
| [bin](https://github.com/openai/openai-python/tree/main/bin "bin") | [bin](https://github.com/openai/openai-python/tree/main/bin "bin") | [fix: temporarily patch upstream version to fix broken release flow (](https://github.com/openai/openai-python/commit/8061d18dd8bb1f9f17a46ac0d90edb2592a132a0 "fix: temporarily patch upstream version to fix broken release flow (#1500)") [#…](https://github.com/openai/openai-python/pull/1500) | Jun 25, 2024 |
| [examples](https://github.com/openai/openai-python/tree/main/examples "examples") | [examples](https://github.com/openai/openai-python/tree/main/examples "examples") | [docs(examples/azure): add async snippet (](https://github.com/openai/openai-python/commit/abc5459c7504eec25a67b35104e2e09e7d8f232c "docs(examples/azure): add async snippet (#1787)") [#1787](https://github.com/openai/openai-python/pull/1787) [)](https://github.com/openai/openai-python/commit/abc5459c7504eec25a67b35104e2e09e7d8f232c "docs(examples/azure): add async snippet (#1787)") | Jan 24, 2025 |
| [scripts](https://github.com/openai/openai-python/tree/main/scripts "scripts") | [scripts](https://github.com/openai/openai-python/tree/main/scripts "scripts") | [chore(internal): bummp ruff dependency (](https://github.com/openai/openai-python/commit/6afde0dc8512a16ff2eca781fee0395cab254f8c "chore(internal): bummp ruff dependency (#2080)") [#2080](https://github.com/openai/openai-python/pull/2080) [)](https://github.com/openai/openai-python/commit/6afde0dc8512a16ff2eca781fee0395cab254f8c "chore(internal): bummp ruff dependency (#2080)") | Feb 5, 2025 |
| [src/openai](https://github.com/openai/openai-python/tree/main/src/openai "This path skips through empty directories") | [src/openai](https://github.com/openai/openai-python/tree/main/src/openai "This path skips through empty directories") | [release: 1.63.0](https://github.com/openai/openai-python/commit/720ae54414f392202289578c9cc3b84cccc7432c "release: 1.63.0") | Feb 13, 2025 |
| [tests](https://github.com/openai/openai-python/tree/main/tests "tests") | [tests](https://github.com/openai/openai-python/tree/main/tests "tests") | [feat(api): add support for storing chat completions (](https://github.com/openai/openai-python/commit/300f58bbbde749e023dd1cf39de8f5339780a33d "feat(api): add support for storing chat completions (#2117)") [#2117](https://github.com/openai/openai-python/pull/2117) [)](https://github.com/openai/openai-python/commit/300f58bbbde749e023dd1cf39de8f5339780a33d "feat(api): add support for storing chat completions (#2117)") | Feb 13, 2025 |
| [.gitignore](https://github.com/openai/openai-python/blob/main/.gitignore ".gitignore") | [.gitignore](https://github.com/openai/openai-python/blob/main/.gitignore ".gitignore") | [chore: gitignore test server logs (](https://github.com/openai/openai-python/commit/24347efc6d94faddb10b773b04c2b5afa38b2ea6 "chore: gitignore test server logs (#1509)") [#1509](https://github.com/openai/openai-python/pull/1509) [)](https://github.com/openai/openai-python/commit/24347efc6d94faddb10b773b04c2b5afa38b2ea6 "chore: gitignore test server logs (#1509)") | Jul 2, 2024 |
| [.python-version](https://github.com/openai/openai-python/blob/main/.python-version ".python-version") | [.python-version](https://github.com/openai/openai-python/blob/main/.python-version ".python-version") | [V1 (](https://github.com/openai/openai-python/commit/08b8179a6b3e46ca8eb117f819cc6563ae74e27d "V1 (#677)  * cleanup  * v1.0.0-beta.1  * docs: add basic manual azure example  * docs: use chat completions instead of completions for demo example  * test: rename `API_BASE_URL` to `TEST_API_BASE_URL`  * feat(client): handle retry-after header with a date format  * feat(api): remove `content_filter` stop_reason and update documentation  * refactor(cli): rename internal types for improved auto complete  * feat(client): add forwards-compatible pydantic methods  * feat(api): move `n_epochs` under `hyperparameters`  * feat(client): add support for passing in a httpx client  * chore: update README  * feat(cli): use http/2 if h2 is available  * chore(docs): remove trailing spaces  * feat(client): add logging setup  * chore(internal): minor updates  * v1.0.0-beta.2  * docs: use chat completions instead of completions for demo example  * chore: add case insensitive get header function  * fix(client): correctly handle errors during streaming  * fix(streaming): add additional overload for ambiguous stream param  * chore(internal): enable lint rule  * chore(internal): cleanup some redundant code  * fix(client): accept io.IOBase instances in file params  * docs: improve error message for invalid file param type  * 1.0.0-beta.3  * chore(internal): migrate from Poetry to Rye  * feat(cli): add `tools fine_tunes.prepare_data`  * feat(client): support passing httpx.URL instances to base_url  * chore(internal): fix some latent type errors  * feat(api): add embeddings encoding_format  * feat: use numpy for faster embeddings decoding  * chore(internal): bump pyright  * chore(internal): bump deps  * feat(client): improve file upload types  * feat(client): adjust retry behavior to be exponential backoff  * ci: add lint workflow  * docs: improve to dictionary example  * ci(lint): run ruff too  * chore(internal): require explicit overrides  * feat(client): support accessing raw response objects  * test(qs): add an additional test case for array brackets  * feat(client): add dedicated Azure client  * feat(package): add classifiers  * docs(readme): add Azure guide  * 1.0.0-rc1  * docs: small cleanup  * feat(github): include a devcontainer setup  * chore: improve type names  * feat(client): allow binary returns  * feat(client): support passing BaseModels to request params at runtime  * fix(binaries): don't synchronously block in astream_to_file  * 1.0.0-rc2  * chore(internal): remove unused int/float conversion  * docs(readme): improve example snippets  * fix: prevent TypeError in Python 3.8 (ABC is not subscriptable)  * 1.0.0-rc3  * docs: update streaming example  * docs(readme): update opening  * v1.0.0  ---------  Co-authored-by: Robert Craigie <robert@craigie.dev> Co-authored-by: Stainless Bot <107565488+stainless-bot@users.noreply.github.com> Co-authored-by: Stainless Bot <dev@stainlessapi.com> Co-authored-by: Alex Rattray <rattray.alex@gmail.com>") [#677](https://github.com/openai/openai-python/pull/677) [)](https://github.com/openai/openai-python/commit/08b8179a6b3e46ca8eb117f819cc6563ae74e27d "V1 (#677)  * cleanup  * v1.0.0-beta.1  * docs: add basic manual azure example  * docs: use chat completions instead of completions for demo example  * test: rename `API_BASE_URL` to `TEST_API_BASE_URL`  * feat(client): handle retry-after header with a date format  * feat(api): remove `content_filter` stop_reason and update documentation  * refactor(cli): rename internal types for improved auto complete  * feat(client): add forwards-compatible pydantic methods  * feat(api): move `n_epochs` under `hyperparameters`  * feat(client): add support for passing in a httpx client  * chore: update README  * feat(cli): use http/2 if h2 is available  * chore(docs): remove trailing spaces  * feat(client): add logging setup  * chore(internal): minor updates  * v1.0.0-beta.2  * docs: use chat completions instead of completions for demo example  * chore: add case insensitive get header function  * fix(client): correctly handle errors during streaming  * fix(streaming): add additional overload for ambiguous stream param  * chore(internal): enable lint rule  * chore(internal): cleanup some redundant code  * fix(client): accept io.IOBase instances in file params  * docs: improve error message for invalid file param type  * 1.0.0-beta.3  * chore(internal): migrate from Poetry to Rye  * feat(cli): add `tools fine_tunes.prepare_data`  * feat(client): support passing httpx.URL instances to base_url  * chore(internal): fix some latent type errors  * feat(api): add embeddings encoding_format  * feat: use numpy for faster embeddings decoding  * chore(internal): bump pyright  * chore(internal): bump deps  * feat(client): improve file upload types  * feat(client): adjust retry behavior to be exponential backoff  * ci: add lint workflow  * docs: improve to dictionary example  * ci(lint): run ruff too  * chore(internal): require explicit overrides  * feat(client): support accessing raw response objects  * test(qs): add an additional test case for array brackets  * feat(client): add dedicated Azure client  * feat(package): add classifiers  * docs(readme): add Azure guide  * 1.0.0-rc1  * docs: small cleanup  * feat(github): include a devcontainer setup  * chore: improve type names  * feat(client): allow binary returns  * feat(client): support passing BaseModels to request params at runtime  * fix(binaries): don't synchronously block in astream_to_file  * 1.0.0-rc2  * chore(internal): remove unused int/float conversion  * docs(readme): improve example snippets  * fix: prevent TypeError in Python 3.8 (ABC is not subscriptable)  * 1.0.0-rc3  * docs: update streaming example  * docs(readme): update opening  * v1.0.0  ---------  Co-authored-by: Robert Craigie <robert@craigie.dev> Co-authored-by: Stainless Bot <107565488+stainless-bot@users.noreply.github.com> Co-authored-by: Stainless Bot <dev@stainlessapi.com> Co-authored-by: Alex Rattray <rattray.alex@gmail.com>") | Nov 6, 2023 |
| [.release-please-manifest.json](https://github.com/openai/openai-python/blob/main/.release-please-manifest.json ".release-please-manifest.json") | [.release-please-manifest.json](https://github.com/openai/openai-python/blob/main/.release-please-manifest.json ".release-please-manifest.json") | [release: 1.63.0](https://github.com/openai/openai-python/commit/720ae54414f392202289578c9cc3b84cccc7432c "release: 1.63.0") | Feb 13, 2025 |
| [.stats.yml](https://github.com/openai/openai-python/blob/main/.stats.yml ".stats.yml") | [.stats.yml](https://github.com/openai/openai-python/blob/main/.stats.yml ".stats.yml") | [feat(api): add support for storing chat completions (](https://github.com/openai/openai-python/commit/300f58bbbde749e023dd1cf39de8f5339780a33d "feat(api): add support for storing chat completions (#2117)") [#2117](https://github.com/openai/openai-python/pull/2117) [)](https://github.com/openai/openai-python/commit/300f58bbbde749e023dd1cf39de8f5339780a33d "feat(api): add support for storing chat completions (#2117)") | Feb 13, 2025 |
| [Brewfile](https://github.com/openai/openai-python/blob/main/Brewfile "Brewfile") | [Brewfile](https://github.com/openai/openai-python/blob/main/Brewfile "Brewfile") | [feat(api): delete messages (](https://github.com/openai/openai-python/commit/d2738d4259aa1c58e206ec23e388855fa218d3f9 "feat(api): delete messages (#1388)") [#1388](https://github.com/openai/openai-python/pull/1388) [)](https://github.com/openai/openai-python/commit/d2738d4259aa1c58e206ec23e388855fa218d3f9 "feat(api): delete messages (#1388)") | Apr 30, 2024 |
| [CHANGELOG.md](https://github.com/openai/openai-python/blob/main/CHANGELOG.md "CHANGELOG.md") | [CHANGELOG.md](https://github.com/openai/openai-python/blob/main/CHANGELOG.md "CHANGELOG.md") | [release: 1.63.0](https://github.com/openai/openai-python/commit/720ae54414f392202289578c9cc3b84cccc7432c "release: 1.63.0") | Feb 13, 2025 |
| [CONTRIBUTING.md](https://github.com/openai/openai-python/blob/main/CONTRIBUTING.md "CONTRIBUTING.md") | [CONTRIBUTING.md](https://github.com/openai/openai-python/blob/main/CONTRIBUTING.md "CONTRIBUTING.md") | [docs: fix typo in fenced code block language (](https://github.com/openai/openai-python/commit/50de514b910aced32104833acd892bebfb2cf123 "docs: fix typo in fenced code block language (#1769)") [#1769](https://github.com/openai/openai-python/pull/1769) [)](https://github.com/openai/openai-python/commit/50de514b910aced32104833acd892bebfb2cf123 "docs: fix typo in fenced code block language (#1769)") | Oct 7, 2024 |
| [LICENSE](https://github.com/openai/openai-python/blob/main/LICENSE "LICENSE") | [LICENSE](https://github.com/openai/openai-python/blob/main/LICENSE "LICENSE") | [chore: bump license year (](https://github.com/openai/openai-python/commit/99861632e9bdb1a480d92913d621bded574bf797 "chore: bump license year (#1981)") [#1981](https://github.com/openai/openai-python/pull/1981) [)](https://github.com/openai/openai-python/commit/99861632e9bdb1a480d92913d621bded574bf797 "chore: bump license year (#1981)") | Jan 2, 2025 |
| [README.md](https://github.com/openai/openai-python/blob/main/README.md "README.md") | [README.md](https://github.com/openai/openai-python/blob/main/README.md "README.md") | [docs(readme): current section links (](https://github.com/openai/openai-python/commit/90e3d39655548c935002dee7ef6f617c846c123c "docs(readme): current section links (#2055)  chore(helpers): section links") [#2055](https://github.com/openai/openai-python/pull/2055) [)](https://github.com/openai/openai-python/commit/90e3d39655548c935002dee7ef6f617c846c123c "docs(readme): current section links (#2055)  chore(helpers): section links") | Jan 31, 2025 |
| [SECURITY.md](https://github.com/openai/openai-python/blob/main/SECURITY.md "SECURITY.md") | [SECURITY.md](https://github.com/openai/openai-python/blob/main/SECURITY.md "SECURITY.md") | [chore(docs): add SECURITY.md (](https://github.com/openai/openai-python/commit/1aeaf02f662e6e925180ddfcaa26508408b2f2a4 "chore(docs): add SECURITY.md (#1408)") [#1408](https://github.com/openai/openai-python/pull/1408) [)](https://github.com/openai/openai-python/commit/1aeaf02f662e6e925180ddfcaa26508408b2f2a4 "chore(docs): add SECURITY.md (#1408)") | May 10, 2024 |
| [api.md](https://github.com/openai/openai-python/blob/main/api.md "api.md") | [api.md](https://github.com/openai/openai-python/blob/main/api.md "api.md") | [feat(api): add support for storing chat completions (](https://github.com/openai/openai-python/commit/300f58bbbde749e023dd1cf39de8f5339780a33d "feat(api): add support for storing chat completions (#2117)") [#2117](https://github.com/openai/openai-python/pull/2117) [)](https://github.com/openai/openai-python/commit/300f58bbbde749e023dd1cf39de8f5339780a33d "feat(api): add support for storing chat completions (#2117)") | Feb 13, 2025 |
| [helpers.md](https://github.com/openai/openai-python/blob/main/helpers.md "helpers.md") | [helpers.md](https://github.com/openai/openai-python/blob/main/helpers.md "helpers.md") | [docs(readme): current section links (](https://github.com/openai/openai-python/commit/90e3d39655548c935002dee7ef6f617c846c123c "docs(readme): current section links (#2055)  chore(helpers): section links") [#2055](https://github.com/openai/openai-python/pull/2055) [)](https://github.com/openai/openai-python/commit/90e3d39655548c935002dee7ef6f617c846c123c "docs(readme): current section links (#2055)  chore(helpers): section links") | Jan 31, 2025 |
| [mypy.ini](https://github.com/openai/openai-python/blob/main/mypy.ini "mypy.ini") | [mypy.ini](https://github.com/openai/openai-python/blob/main/mypy.ini "mypy.ini") | [chore(internal): update deps (](https://github.com/openai/openai-python/commit/83f11490fa291f9814f3dae6a65b1f62d0177675 "chore(internal): update deps (#2015)") [#2015](https://github.com/openai/openai-python/pull/2015) [)](https://github.com/openai/openai-python/commit/83f11490fa291f9814f3dae6a65b1f62d0177675 "chore(internal): update deps (#2015)") | Jan 17, 2025 |
| [noxfile.py](https://github.com/openai/openai-python/blob/main/noxfile.py "noxfile.py") | [noxfile.py](https://github.com/openai/openai-python/blob/main/noxfile.py "noxfile.py") | [V1 (](https://github.com/openai/openai-python/commit/08b8179a6b3e46ca8eb117f819cc6563ae74e27d "V1 (#677)  * cleanup  * v1.0.0-beta.1  * docs: add basic manual azure example  * docs: use chat completions instead of completions for demo example  * test: rename `API_BASE_URL` to `TEST_API_BASE_URL`  * feat(client): handle retry-after header with a date format  * feat(api): remove `content_filter` stop_reason and update documentation  * refactor(cli): rename internal types for improved auto complete  * feat(client): add forwards-compatible pydantic methods  * feat(api): move `n_epochs` under `hyperparameters`  * feat(client): add support for passing in a httpx client  * chore: update README  * feat(cli): use http/2 if h2 is available  * chore(docs): remove trailing spaces  * feat(client): add logging setup  * chore(internal): minor updates  * v1.0.0-beta.2  * docs: use chat completions instead of completions for demo example  * chore: add case insensitive get header function  * fix(client): correctly handle errors during streaming  * fix(streaming): add additional overload for ambiguous stream param  * chore(internal): enable lint rule  * chore(internal): cleanup some redundant code  * fix(client): accept io.IOBase instances in file params  * docs: improve error message for invalid file param type  * 1.0.0-beta.3  * chore(internal): migrate from Poetry to Rye  * feat(cli): add `tools fine_tunes.prepare_data`  * feat(client): support passing httpx.URL instances to base_url  * chore(internal): fix some latent type errors  * feat(api): add embeddings encoding_format  * feat: use numpy for faster embeddings decoding  * chore(internal): bump pyright  * chore(internal): bump deps  * feat(client): improve file upload types  * feat(client): adjust retry behavior to be exponential backoff  * ci: add lint workflow  * docs: improve to dictionary example  * ci(lint): run ruff too  * chore(internal): require explicit overrides  * feat(client): support accessing raw response objects  * test(qs): add an additional test case for array brackets  * feat(client): add dedicated Azure client  * feat(package): add classifiers  * docs(readme): add Azure guide  * 1.0.0-rc1  * docs: small cleanup  * feat(github): include a devcontainer setup  * chore: improve type names  * feat(client): allow binary returns  * feat(client): support passing BaseModels to request params at runtime  * fix(binaries): don't synchronously block in astream_to_file  * 1.0.0-rc2  * chore(internal): remove unused int/float conversion  * docs(readme): improve example snippets  * fix: prevent TypeError in Python 3.8 (ABC is not subscriptable)  * 1.0.0-rc3  * docs: update streaming example  * docs(readme): update opening  * v1.0.0  ---------  Co-authored-by: Robert Craigie <robert@craigie.dev> Co-authored-by: Stainless Bot <107565488+stainless-bot@users.noreply.github.com> Co-authored-by: Stainless Bot <dev@stainlessapi.com> Co-authored-by: Alex Rattray <rattray.alex@gmail.com>") [#677](https://github.com/openai/openai-python/pull/677) [)](https://github.com/openai/openai-python/commit/08b8179a6b3e46ca8eb117f819cc6563ae74e27d "V1 (#677)  * cleanup  * v1.0.0-beta.1  * docs: add basic manual azure example  * docs: use chat completions instead of completions for demo example  * test: rename `API_BASE_URL` to `TEST_API_BASE_URL`  * feat(client): handle retry-after header with a date format  * feat(api): remove `content_filter` stop_reason and update documentation  * refactor(cli): rename internal types for improved auto complete  * feat(client): add forwards-compatible pydantic methods  * feat(api): move `n_epochs` under `hyperparameters`  * feat(client): add support for passing in a httpx client  * chore: update README  * feat(cli): use http/2 if h2 is available  * chore(docs): remove trailing spaces  * feat(client): add logging setup  * chore(internal): minor updates  * v1.0.0-beta.2  * docs: use chat completions instead of completions for demo example  * chore: add case insensitive get header function  * fix(client): correctly handle errors during streaming  * fix(streaming): add additional overload for ambiguous stream param  * chore(internal): enable lint rule  * chore(internal): cleanup some redundant code  * fix(client): accept io.IOBase instances in file params  * docs: improve error message for invalid file param type  * 1.0.0-beta.3  * chore(internal): migrate from Poetry to Rye  * feat(cli): add `tools fine_tunes.prepare_data`  * feat(client): support passing httpx.URL instances to base_url  * chore(internal): fix some latent type errors  * feat(api): add embeddings encoding_format  * feat: use numpy for faster embeddings decoding  * chore(internal): bump pyright  * chore(internal): bump deps  * feat(client): improve file upload types  * feat(client): adjust retry behavior to be exponential backoff  * ci: add lint workflow  * docs: improve to dictionary example  * ci(lint): run ruff too  * chore(internal): require explicit overrides  * feat(client): support accessing raw response objects  * test(qs): add an additional test case for array brackets  * feat(client): add dedicated Azure client  * feat(package): add classifiers  * docs(readme): add Azure guide  * 1.0.0-rc1  * docs: small cleanup  * feat(github): include a devcontainer setup  * chore: improve type names  * feat(client): allow binary returns  * feat(client): support passing BaseModels to request params at runtime  * fix(binaries): don't synchronously block in astream_to_file  * 1.0.0-rc2  * chore(internal): remove unused int/float conversion  * docs(readme): improve example snippets  * fix: prevent TypeError in Python 3.8 (ABC is not subscriptable)  * 1.0.0-rc3  * docs: update streaming example  * docs(readme): update opening  * v1.0.0  ---------  Co-authored-by: Robert Craigie <robert@craigie.dev> Co-authored-by: Stainless Bot <107565488+stainless-bot@users.noreply.github.com> Co-authored-by: Stainless Bot <dev@stainlessapi.com> Co-authored-by: Alex Rattray <rattray.alex@gmail.com>") | Nov 6, 2023 |
| [pyproject.toml](https://github.com/openai/openai-python/blob/main/pyproject.toml "pyproject.toml") | [pyproject.toml](https://github.com/openai/openai-python/blob/main/pyproject.toml "pyproject.toml") | [release: 1.63.0](https://github.com/openai/openai-python/commit/720ae54414f392202289578c9cc3b84cccc7432c "release: 1.63.0") | Feb 13, 2025 |
| [release-please-config.json](https://github.com/openai/openai-python/blob/main/release-please-config.json "release-please-config.json") | [release-please-config.json](https://github.com/openai/openai-python/blob/main/release-please-config.json "release-please-config.json") | [chore(internal): support pre-release versioning (](https://github.com/openai/openai-python/commit/336cf03092376c0b54cc2cfbd78167c1aac01af7 "chore(internal): support pre-release versioning (#1113)") [#1113](https://github.com/openai/openai-python/pull/1113) [)](https://github.com/openai/openai-python/commit/336cf03092376c0b54cc2cfbd78167c1aac01af7 "chore(internal): support pre-release versioning (#1113)") | Feb 2, 2024 |
| [requirements-dev.lock](https://github.com/openai/openai-python/blob/main/requirements-dev.lock "requirements-dev.lock") | [requirements-dev.lock](https://github.com/openai/openai-python/blob/main/requirements-dev.lock "requirements-dev.lock") | [chore(internal): bummp ruff dependency (](https://github.com/openai/openai-python/commit/6afde0dc8512a16ff2eca781fee0395cab254f8c "chore(internal): bummp ruff dependency (#2080)") [#2080](https://github.com/openai/openai-python/pull/2080) [)](https://github.com/openai/openai-python/commit/6afde0dc8512a16ff2eca781fee0395cab254f8c "chore(internal): bummp ruff dependency (#2080)") | Feb 5, 2025 |
| [requirements.lock](https://github.com/openai/openai-python/blob/main/requirements.lock "requirements.lock") | [requirements.lock](https://github.com/openai/openai-python/blob/main/requirements.lock "requirements.lock") | [chore(internal): update websockets dep (](https://github.com/openai/openai-python/commit/1e5e19976a02f4f3423cf7e32ad5fa020c857b82 "chore(internal): update websockets dep (#2036)") [#2036](https://github.com/openai/openai-python/pull/2036) [)](https://github.com/openai/openai-python/commit/1e5e19976a02f4f3423cf7e32ad5fa020c857b82 "chore(internal): update websockets dep (#2036)") | Jan 20, 2025 |
| View all files |

## Repository files navigation

# OpenAI Python API library

[Permalink: OpenAI Python API library](https://github.com/openai/openai-python#openai-python-api-library)

[![PyPI version](https://camo.githubusercontent.com/b2f318dcc71bb9b8e6021c196a2cce69a3a64e721ddc19c4904d42f84d0219ac/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f6f70656e61692e737667)](https://pypi.org/project/openai/)

The OpenAI Python library provides convenient access to the OpenAI REST API from any Python 3.8+
application. The library includes type definitions for all request params and response fields,
and offers both synchronous and asynchronous clients powered by [httpx](https://github.com/encode/httpx).

It is generated from our [OpenAPI specification](https://github.com/openai/openai-openapi) with [Stainless](https://stainlessapi.com/).

## Documentation

[Permalink: Documentation](https://github.com/openai/openai-python#documentation)

The REST API documentation can be found on [platform.openai.com](https://platform.openai.com/docs). The full API of this library can be found in [api.md](https://github.com/openai/openai-python/blob/main/api.md).

## Installation

[Permalink: Installation](https://github.com/openai/openai-python#installation)

Important

The SDK was rewritten in v1, which was released November 6th 2023. See the [v1 migration guide](https://github.com/openai/openai-python/discussions/742), which includes scripts to automatically update your code.

```
# install from PyPI
pip install openai
```

## Usage

[Permalink: Usage](https://github.com/openai/openai-python#usage)

The full API of this library can be found in [api.md](https://github.com/openai/openai-python/blob/main/api.md).

```
import os
from openai import OpenAI

client = OpenAI(
    api_key=os.environ.get("OPENAI_API_KEY"),  # This is the default and can be omitted
)

chat_completion = client.chat.completions.create(
    messages=[\
        {\
            "role": "user",\
            "content": "Say this is a test",\
        }\
    ],
    model="gpt-4o",
)
```

While you can provide an `api_key` keyword argument,
we recommend using [python-dotenv](https://pypi.org/project/python-dotenv/)
to add `OPENAI_API_KEY="My API Key"` to your `.env` file
so that your API Key is not stored in source control.

### Vision

[Permalink: Vision](https://github.com/openai/openai-python#vision)

With a hosted image:

```
response = client.chat.completions.create(
    model="gpt-4o-mini",
    messages=[\
        {\
            "role": "user",\
            "content": [\
                {"type": "text", "text": prompt},\
                {\
                    "type": "image_url",\
                    "image_url": {"url": f"{img_url}"},\
                },\
            ],\
        }\
    ],
)
```

With the image as a base64 encoded string:

```
response = client.chat.completions.create(
    model="gpt-4o-mini",
    messages=[\
        {\
            "role": "user",\
            "content": [\
                {"type": "text", "text": prompt},\
                {\
                    "type": "image_url",\
                    "image_url": {"url": f"data:{img_type};base64,{img_b64_str}"},\
                },\
            ],\
        }\
    ],
)
```

### Polling Helpers

[Permalink: Polling Helpers](https://github.com/openai/openai-python#polling-helpers)

When interacting with the API some actions such as starting a Run and adding files to vector stores are asynchronous and take time to complete. The SDK includes
helper functions which will poll the status until it reaches a terminal state and then return the resulting object.
If an API method results in an action that could benefit from polling there will be a corresponding version of the
method ending in '\_and\_poll'.

For instance to create a Run and poll until it reaches a terminal state you can run:

```
run = client.beta.threads.runs.create_and_poll(
    thread_id=thread.id,
    assistant_id=assistant.id,
)
```

More information on the lifecycle of a Run can be found in the [Run Lifecycle Documentation](https://platform.openai.com/docs/assistants/how-it-works/run-lifecycle)

### Bulk Upload Helpers

[Permalink: Bulk Upload Helpers](https://github.com/openai/openai-python#bulk-upload-helpers)

When creating and interacting with vector stores, you can use polling helpers to monitor the status of operations.
For convenience, we also provide a bulk upload helper to allow you to simultaneously upload several files at once.

```
sample_files = [Path("sample-paper.pdf"), ...]

batch = await client.vector_stores.file_batches.upload_and_poll(
    store.id,
    files=sample_files,
)
```

### Streaming Helpers

[Permalink: Streaming Helpers](https://github.com/openai/openai-python#streaming-helpers)

The SDK also includes helpers to process streams and handle incoming events.

```
with client.beta.threads.runs.stream(
    thread_id=thread.id,
    assistant_id=assistant.id,
    instructions="Please address the user as Jane Doe. The user has a premium account.",
) as stream:
    for event in stream:
        # Print the text from text delta events
        if event.type == "thread.message.delta" and event.data.delta.content:
            print(event.data.delta.content[0].text)
```

More information on streaming helpers can be found in the dedicated documentation: [helpers.md](https://github.com/openai/openai-python/blob/main/helpers.md)

## Async usage

[Permalink: Async usage](https://github.com/openai/openai-python#async-usage)

Simply import `AsyncOpenAI` instead of `OpenAI` and use `await` with each API call:

```
import os
import asyncio
from openai import AsyncOpenAI

client = AsyncOpenAI(
    api_key=os.environ.get("OPENAI_API_KEY"),  # This is the default and can be omitted
)

async def main() -> None:
    chat_completion = await client.chat.completions.create(
        messages=[\
            {\
                "role": "user",\
                "content": "Say this is a test",\
            }\
        ],
        model="gpt-4o",
    )

asyncio.run(main())
```

Functionality between the synchronous and asynchronous clients is otherwise identical.

## Streaming responses

[Permalink: Streaming responses](https://github.com/openai/openai-python#streaming-responses)

We provide support for streaming responses using Server Side Events (SSE).

```
from openai import OpenAI

client = OpenAI()

stream = client.chat.completions.create(
    messages=[\
        {\
            "role": "user",\
            "content": "Say this is a test",\
        }\
    ],
    model="gpt-4o",
    stream=True,
)
for chunk in stream:
    print(chunk.choices[0].delta.content or "", end="")
```

The async client uses the exact same interface.

```
import asyncio
from openai import AsyncOpenAI

client = AsyncOpenAI()

async def main():
    stream = await client.chat.completions.create(
        model="gpt-4",
        messages=[{"role": "user", "content": "Say this is a test"}],
        stream=True,
    )
    async for chunk in stream:
        print(chunk.choices[0].delta.content or "", end="")

asyncio.run(main())
```

## Module-level client

[Permalink: Module-level client](https://github.com/openai/openai-python#module-level-client)

Important

We highly recommend instantiating client instances instead of relying on the global client.

We also expose a global client instance that is accessible in a similar fashion to versions prior to v1.

```
import openai

# optional; defaults to `os.environ['OPENAI_API_KEY']`
openai.api_key = '...'

# all client options can be configured just like the `OpenAI` instantiation counterpart
openai.base_url = "https://..."
openai.default_headers = {"x-foo": "true"}

completion = openai.chat.completions.create(
    model="gpt-4o",
    messages=[\
        {\
            "role": "user",\
            "content": "How do I output all files in a directory using Python?",\
        },\
    ],
)
print(completion.choices[0].message.content)
```

The API is the exact same as the standard client instance-based API.

This is intended to be used within REPLs or notebooks for faster iteration, **not** in application code.

We recommend that you always instantiate a client (e.g., with `client = OpenAI()`) in application code because:

- It can be difficult to reason about where client options are configured
- It's not possible to change certain client options without potentially causing race conditions
- It's harder to mock for testing purposes
- It's not possible to control cleanup of network connections

## Realtime API beta

[Permalink: Realtime API beta](https://github.com/openai/openai-python#realtime-api-beta)

The Realtime API enables you to build low-latency, multi-modal conversational experiences. It currently supports text and audio as both input and output, as well as [function calling](https://platform.openai.com/docs/guides/function-calling) through a WebSocket connection.

Under the hood the SDK uses the [`websockets`](https://websockets.readthedocs.io/en/stable/) library to manage connections.

The Realtime API works through a combination of client-sent events and server-sent events. Clients can send events to do things like update session configuration or send text and audio inputs. Server events confirm when audio responses have completed, or when a text response from the model has been received. A full event reference can be found [here](https://platform.openai.com/docs/api-reference/realtime-client-events) and a guide can be found [here](https://platform.openai.com/docs/guides/realtime).

Basic text based example:

```
import asyncio
from openai import AsyncOpenAI

async def main():
    client = AsyncOpenAI()

    async with client.beta.realtime.connect(model="gpt-4o-realtime-preview") as connection:
        await connection.session.update(session={'modalities': ['text']})

        await connection.conversation.item.create(
            item={
                "type": "message",
                "role": "user",
                "content": [{"type": "input_text", "text": "Say hello!"}],
            }
        )
        await connection.response.create()

        async for event in connection:
            if event.type == 'response.text.delta':
                print(event.delta, flush=True, end="")

            elif event.type == 'response.text.done':
                print()

            elif event.type == "response.done":
                break

asyncio.run(main())
```

However the real magic of the Realtime API is handling audio inputs / outputs, see this example [TUI script](https://github.com/openai/openai-python/blob/main/examples/realtime/push_to_talk_app.py) for a fully fledged example.

### Realtime error handling

[Permalink: Realtime error handling](https://github.com/openai/openai-python#realtime-error-handling)

Whenever an error occurs, the Realtime API will send an [`error` event](https://platform.openai.com/docs/guides/realtime-model-capabilities#error-handling) and the connection will stay open and remain usable. This means you need to handle it yourself, as _no errors are raised directly_ by the SDK when an `error` event comes in.

```
client = AsyncOpenAI()

async with client.beta.realtime.connect(model="gpt-4o-realtime-preview") as connection:
    ...
    async for event in connection:
        if event.type == 'error':
            print(event.error.type)
            print(event.error.code)
            print(event.error.event_id)
            print(event.error.message)
```

## Using types

[Permalink: Using types](https://github.com/openai/openai-python#using-types)

Nested request parameters are [TypedDicts](https://docs.python.org/3/library/typing.html#typing.TypedDict). Responses are [Pydantic models](https://docs.pydantic.dev/) which also provide helper methods for things like:

- Serializing back into JSON, `model.to_json()`
- Converting to a dictionary, `model.to_dict()`

Typed requests and responses provide autocomplete and documentation within your editor. If you would like to see type errors in VS Code to help catch bugs earlier, set `python.analysis.typeCheckingMode` to `basic`.

## Pagination

[Permalink: Pagination](https://github.com/openai/openai-python#pagination)

List methods in the OpenAI API are paginated.

This library provides auto-paginating iterators with each list response, so you do not have to request successive pages manually:

```
from openai import OpenAI

client = OpenAI()

all_jobs = []
# Automatically fetches more pages as needed.
for job in client.fine_tuning.jobs.list(
    limit=20,
):
    # Do something with job here
    all_jobs.append(job)
print(all_jobs)
```

Or, asynchronously:

```
import asyncio
from openai import AsyncOpenAI

client = AsyncOpenAI()

async def main() -> None:
    all_jobs = []
    # Iterate through items across all pages, issuing requests as needed.
    async for job in client.fine_tuning.jobs.list(
        limit=20,
    ):
        all_jobs.append(job)
    print(all_jobs)

asyncio.run(main())
```

Alternatively, you can use the `.has_next_page()`, `.next_page_info()`, or `.get_next_page()` methods for more granular control working with pages:

```
first_page = await client.fine_tuning.jobs.list(
    limit=20,
)
if first_page.has_next_page():
    print(f"will fetch next page using these details: {first_page.next_page_info()}")
    next_page = await first_page.get_next_page()
    print(f"number of items we just fetched: {len(next_page.data)}")

# Remove `await` for non-async usage.
```

Or just work directly with the returned data:

```
first_page = await client.fine_tuning.jobs.list(
    limit=20,
)

print(f"next page cursor: {first_page.after}")  # => "next page cursor: ..."
for job in first_page.data:
    print(job.id)

# Remove `await` for non-async usage.
```

## Nested params

[Permalink: Nested params](https://github.com/openai/openai-python#nested-params)

Nested parameters are dictionaries, typed using `TypedDict`, for example:

```
from openai import OpenAI

client = OpenAI()

completion = client.chat.completions.create(
    messages=[\
        {\
            "role": "user",\
            "content": "Can you generate an example json object describing a fruit?",\
        }\
    ],
    model="gpt-4o",
    response_format={"type": "json_object"},
)
```

## File uploads

[Permalink: File uploads](https://github.com/openai/openai-python#file-uploads)

Request parameters that correspond to file uploads can be passed as `bytes`, a [`PathLike`](https://docs.python.org/3/library/os.html#os.PathLike) instance or a tuple of `(filename, contents, media type)`.

```
from pathlib import Path
from openai import OpenAI

client = OpenAI()

client.files.create(
    file=Path("input.jsonl"),
    purpose="fine-tune",
)
```

The async client uses the exact same interface. If you pass a [`PathLike`](https://docs.python.org/3/library/os.html#os.PathLike) instance, the file contents will be read asynchronously automatically.

## Handling errors

[Permalink: Handling errors](https://github.com/openai/openai-python#handling-errors)

When the library is unable to connect to the API (for example, due to network connection problems or a timeout), a subclass of `openai.APIConnectionError` is raised.

When the API returns a non-success status code (that is, 4xx or 5xx
response), a subclass of `openai.APIStatusError` is raised, containing `status_code` and `response` properties.

All errors inherit from `openai.APIError`.

```
import openai
from openai import OpenAI

client = OpenAI()

try:
    client.fine_tuning.jobs.create(
        model="gpt-4o",
        training_file="file-abc123",
    )
except openai.APIConnectionError as e:
    print("The server could not be reached")
    print(e.__cause__)  # an underlying Exception, likely raised within httpx.
except openai.RateLimitError as e:
    print("A 429 status code was received; we should back off a bit.")
except openai.APIStatusError as e:
    print("Another non-200-range status code was received")
    print(e.status_code)
    print(e.response)
```

Error codes are as follows:

| Status Code | Error Type |
| --- | --- |
| 400 | `BadRequestError` |
| 401 | `AuthenticationError` |
| 403 | `PermissionDeniedError` |
| 404 | `NotFoundError` |
| 422 | `UnprocessableEntityError` |
| 429 | `RateLimitError` |
| >=500 | `InternalServerError` |
| N/A | `APIConnectionError` |

## Request IDs

[Permalink: Request IDs](https://github.com/openai/openai-python#request-ids)

> For more information on debugging requests, see [these docs](https://platform.openai.com/docs/api-reference/debugging-requests)

All object responses in the SDK provide a `_request_id` property which is added from the `x-request-id` response header so that you can quickly log failing requests and report them back to OpenAI.

```
completion = await client.chat.completions.create(
    messages=[{"role": "user", "content": "Say this is a test"}], model="gpt-4"
)
print(completion._request_id)  # req_123
```

Note that unlike other properties that use an `_` prefix, the `_request_id` property
_is_ public. Unless documented otherwise, _all_ other `_` prefix properties,
methods and modules are _private_.

Important

If you need to access request IDs for failed requests you must catch the `APIStatusError` exception

```
import openai

try:
    completion = await client.chat.completions.create(
        messages=[{"role": "user", "content": "Say this is a test"}], model="gpt-4"
    )
except openai.APIStatusError as exc:
    print(exc.request_id)  # req_123
    raise exc
```

### Retries

[Permalink: Retries](https://github.com/openai/openai-python#retries)

Certain errors are automatically retried 2 times by default, with a short exponential backoff.
Connection errors (for example, due to a network connectivity problem), 408 Request Timeout, 409 Conflict,
429 Rate Limit, and >=500 Internal errors are all retried by default.

You can use the `max_retries` option to configure or disable retry settings:

```
from openai import OpenAI

# Configure the default for all requests:
client = OpenAI(
    # default is 2
    max_retries=0,
)

# Or, configure per-request:
client.with_options(max_retries=5).chat.completions.create(
    messages=[\
        {\
            "role": "user",\
            "content": "How can I get the name of the current day in JavaScript?",\
        }\
    ],
    model="gpt-4o",
)
```

### Timeouts

[Permalink: Timeouts](https://github.com/openai/openai-python#timeouts)

By default requests time out after 10 minutes. You can configure this with a `timeout` option,
which accepts a float or an [`httpx.Timeout`](https://www.python-httpx.org/advanced/timeouts/#fine-tuning-the-configuration) object:

```
from openai import OpenAI

# Configure the default for all requests:
client = OpenAI(
    # 20 seconds (default is 10 minutes)
    timeout=20.0,
)

# More granular control:
client = OpenAI(
    timeout=httpx.Timeout(60.0, read=5.0, write=10.0, connect=2.0),
)

# Override per-request:
client.with_options(timeout=5.0).chat.completions.create(
    messages=[\
        {\
            "role": "user",\
            "content": "How can I list all files in a directory using Python?",\
        }\
    ],
    model="gpt-4o",
)
```

On timeout, an `APITimeoutError` is thrown.

Note that requests that time out are [retried twice by default](https://github.com/openai/openai-python#retries).

## Advanced

[Permalink: Advanced](https://github.com/openai/openai-python#advanced)

### Logging

[Permalink: Logging](https://github.com/openai/openai-python#logging)

We use the standard library [`logging`](https://docs.python.org/3/library/logging.html) module.

You can enable logging by setting the environment variable `OPENAI_LOG` to `info`.

```
$ export OPENAI_LOG=info
```

Or to `debug` for more verbose logging.

### How to tell whether `None` means `null` or missing

[Permalink: How to tell whether None means null or missing](https://github.com/openai/openai-python#how-to-tell-whether-none-means-null-or-missing)

In an API response, a field may be explicitly `null`, or missing entirely; in either case, its value is `None` in this library. You can differentiate the two cases with `.model_fields_set`:

```
if response.my_field is None:
  if 'my_field' not in response.model_fields_set:
    print('Got json like {}, without a "my_field" key present at all.')
  else:
    print('Got json like {"my_field": null}.')
```

### Accessing raw response data (e.g. headers)

[Permalink: Accessing raw response data (e.g. headers)](https://github.com/openai/openai-python#accessing-raw-response-data-eg-headers)

The "raw" Response object can be accessed by prefixing `.with_raw_response.` to any HTTP method call, e.g.,

```
from openai import OpenAI

client = OpenAI()
response = client.chat.completions.with_raw_response.create(
    messages=[{\
        "role": "user",\
        "content": "Say this is a test",\
    }],
    model="gpt-4o",
)
print(response.headers.get('X-My-Header'))

completion = response.parse()  # get the object that `chat.completions.create()` would have returned
print(completion)
```

These methods return a [`LegacyAPIResponse`](https://github.com/openai/openai-python/tree/main/src/openai/_legacy_response.py) object. This is a legacy class as we're changing it slightly in the next major version.

For the sync client this will mostly be the same with the exception
of `content` & `text` will be methods instead of properties. In the
async client, all methods will be async.

A migration script will be provided & the migration in general should
be smooth.

#### `.with_streaming_response`

[Permalink: .with_streaming_response](https://github.com/openai/openai-python#with_streaming_response)

The above interface eagerly reads the full response body when you make the request, which may not always be what you want.

To stream the response body, use `.with_streaming_response` instead, which requires a context manager and only reads the response body once you call `.read()`, `.text()`, `.json()`, `.iter_bytes()`, `.iter_text()`, `.iter_lines()` or `.parse()`. In the async client, these are async methods.

As such, `.with_streaming_response` methods return a different [`APIResponse`](https://github.com/openai/openai-python/tree/main/src/openai/_response.py) object, and the async client returns an [`AsyncAPIResponse`](https://github.com/openai/openai-python/tree/main/src/openai/_response.py) object.

```
with client.chat.completions.with_streaming_response.create(
    messages=[\
        {\
            "role": "user",\
            "content": "Say this is a test",\
        }\
    ],
    model="gpt-4o",
) as response:
    print(response.headers.get("X-My-Header"))

    for line in response.iter_lines():
        print(line)
```

The context manager is required so that the response will reliably be closed.

### Making custom/undocumented requests

[Permalink: Making custom/undocumented requests](https://github.com/openai/openai-python#making-customundocumented-requests)

This library is typed for convenient access to the documented API.

If you need to access undocumented endpoints, params, or response properties, the library can still be used.

#### Undocumented endpoints

[Permalink: Undocumented endpoints](https://github.com/openai/openai-python#undocumented-endpoints)

To make requests to undocumented endpoints, you can make requests using `client.get`, `client.post`, and other
http verbs. Options on the client will be respected (such as retries) when making this request.

```
import httpx

response = client.post(
    "/foo",
    cast_to=httpx.Response,
    body={"my_param": True},
)

print(response.headers.get("x-foo"))
```

#### Undocumented request params

[Permalink: Undocumented request params](https://github.com/openai/openai-python#undocumented-request-params)

If you want to explicitly send an extra param, you can do so with the `extra_query`, `extra_body`, and `extra_headers` request
options.

#### Undocumented response properties

[Permalink: Undocumented response properties](https://github.com/openai/openai-python#undocumented-response-properties)

To access undocumented response properties, you can access the extra fields like `response.unknown_prop`. You
can also get all the extra fields on the Pydantic model as a dict with
[`response.model_extra`](https://docs.pydantic.dev/latest/api/base_model/#pydantic.BaseModel.model_extra).

### Configuring the HTTP client

[Permalink: Configuring the HTTP client](https://github.com/openai/openai-python#configuring-the-http-client)

You can directly override the [httpx client](https://www.python-httpx.org/api/#client) to customize it for your use case, including:

- Support for [proxies](https://www.python-httpx.org/advanced/proxies/)
- Custom [transports](https://www.python-httpx.org/advanced/transports/)
- Additional [advanced](https://www.python-httpx.org/advanced/clients/) functionality

```
import httpx
from openai import OpenAI, DefaultHttpxClient

client = OpenAI(
    # Or use the `OPENAI_BASE_URL` env var
    base_url="http://my.test.server.example.com:8083/v1",
    http_client=DefaultHttpxClient(
        proxy="http://my.test.proxy.example.com",
        transport=httpx.HTTPTransport(local_address="0.0.0.0"),
    ),
)
```

You can also customize the client on a per-request basis by using `with_options()`:

```
client.with_options(http_client=DefaultHttpxClient(...))
```

### Managing HTTP resources

[Permalink: Managing HTTP resources](https://github.com/openai/openai-python#managing-http-resources)

By default the library closes underlying HTTP connections whenever the client is [garbage collected](https://docs.python.org/3/reference/datamodel.html#object.__del__). You can manually close the client using the `.close()` method if desired, or with a context manager that closes when exiting.

```
from openai import OpenAI

with OpenAI() as client:
  # make requests here
  ...

# HTTP client is now closed
```

## Microsoft Azure OpenAI

[Permalink: Microsoft Azure OpenAI](https://github.com/openai/openai-python#microsoft-azure-openai)

To use this library with [Azure OpenAI](https://learn.microsoft.com/azure/ai-services/openai/overview), use the `AzureOpenAI`
class instead of the `OpenAI` class.

Important

The Azure API shape differs from the core API shape which means that the static types for responses / params
won't always be correct.

```
from openai import AzureOpenAI

# gets the API Key from environment variable AZURE_OPENAI_API_KEY
client = AzureOpenAI(
    # https://learn.microsoft.com/azure/ai-services/openai/reference#rest-api-versioning
    api_version="2023-07-01-preview",
    # https://learn.microsoft.com/azure/cognitive-services/openai/how-to/create-resource?pivots=web-portal#create-a-resource
    azure_endpoint="https://example-endpoint.openai.azure.com",
)

completion = client.chat.completions.create(
    model="deployment-name",  # e.g. gpt-35-instant
    messages=[\
        {\
            "role": "user",\
            "content": "How do I output all files in a directory using Python?",\
        },\
    ],
)
print(completion.to_json())
```

In addition to the options provided in the base `OpenAI` client, the following options are provided:

- `azure_endpoint` (or the `AZURE_OPENAI_ENDPOINT` environment variable)
- `azure_deployment`
- `api_version` (or the `OPENAI_API_VERSION` environment variable)
- `azure_ad_token` (or the `AZURE_OPENAI_AD_TOKEN` environment variable)
- `azure_ad_token_provider`

An example of using the client with Microsoft Entra ID (formerly known as Azure Active Directory) can be found [here](https://github.com/openai/openai-python/blob/main/examples/azure_ad.py).

## Versioning

[Permalink: Versioning](https://github.com/openai/openai-python#versioning)

This package generally follows [SemVer](https://semver.org/spec/v2.0.0.html) conventions, though certain backwards-incompatible changes may be released as minor versions:

1. Changes that only affect static types, without breaking runtime behavior.
2. Changes to library internals which are technically public but not intended or documented for external use. _(Please open a GitHub issue to let us know if you are relying on such internals.)_
3. Changes that we do not expect to impact the vast majority of users in practice.

We take backwards-compatibility seriously and work hard to ensure you can rely on a smooth upgrade experience.

We are keen for your feedback; please open an [issue](https://www.github.com/openai/openai-python/issues) with questions, bugs, or suggestions.

### Determining the installed version

[Permalink: Determining the installed version](https://github.com/openai/openai-python#determining-the-installed-version)

If you've upgraded to the latest version but aren't seeing any new features you were expecting then your python environment is likely still using an older version.

You can determine the version that is being used at runtime with:

```
import openai
print(openai.__version__)
```

## Requirements

[Permalink: Requirements](https://github.com/openai/openai-python#requirements)

Python 3.8 or higher.

## Contributing

[Permalink: Contributing](https://github.com/openai/openai-python#contributing)

See [the contributing documentation](https://github.com/openai/openai-python/blob/main/CONTRIBUTING.md).

## About

The official Python library for the OpenAI API


[pypi.org/project/openai/](https://pypi.org/project/openai/ "https://pypi.org/project/openai/")

### Topics

[python](https://github.com/topics/python "Topic: python") [openai](https://github.com/topics/openai "Topic: openai")

### Resources

[Readme](https://github.com/openai/openai-python#readme-ov-file)

### License

[Apache-2.0 license](https://github.com/openai/openai-python#Apache-2.0-1-ov-file)

### Security policy

[Security policy](https://github.com/openai/openai-python#security-ov-file)

[Activity](https://github.com/openai/openai-python/activity)

[Custom properties](https://github.com/openai/openai-python/custom-properties)

### Stars

[**24.6k**\\
stars](https://github.com/openai/openai-python/stargazers)

### Watchers

[**309**\\
watching](https://github.com/openai/openai-python/watchers)

### Forks

[**3.6k**\\
forks](https://github.com/openai/openai-python/forks)

[Report repository](https://github.com/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fopenai%2Fopenai-python&report=openai+%28user%29)

## [Releases\  241](https://github.com/openai/openai-python/releases)

[v1.63.0\\
Latest\\
\\
Feb 13, 2025](https://github.com/openai/openai-python/releases/tag/v1.63.0)

[\+ 240 releases](https://github.com/openai/openai-python/releases)

## [Contributors\  131](https://github.com/openai/openai-python/graphs/contributors)

- [![@stainless-bot](https://avatars.githubusercontent.com/u/107565488?s=64&v=4)](https://github.com/stainless-bot)
- [![@stainless-app[bot]](https://avatars.githubusercontent.com/in/378072?s=64&v=4)](https://github.com/apps/stainless-app)
- [![@RobertCraigie](https://avatars.githubusercontent.com/u/23125036?s=64&v=4)](https://github.com/RobertCraigie)
- [![@hallacy](https://avatars.githubusercontent.com/u/1945079?s=64&v=4)](https://github.com/hallacy)
- [![@rachellim](https://avatars.githubusercontent.com/u/9589037?s=64&v=4)](https://github.com/rachellim)
- [![@logankilpatrick](https://avatars.githubusercontent.com/u/35577566?s=64&v=4)](https://github.com/logankilpatrick)
- [![@ddeville](https://avatars.githubusercontent.com/u/356759?s=64&v=4)](https://github.com/ddeville)
- [![@kristapratico](https://avatars.githubusercontent.com/u/31998003?s=64&v=4)](https://github.com/kristapratico)
- [![@BorisPower](https://avatars.githubusercontent.com/u/81998504?s=64&v=4)](https://github.com/BorisPower)
- [![@athyuttamre](https://avatars.githubusercontent.com/u/1485350?s=64&v=4)](https://github.com/athyuttamre)
- [![@mpokrass](https://avatars.githubusercontent.com/u/5784632?s=64&v=4)](https://github.com/mpokrass)
- [![@jhallard](https://avatars.githubusercontent.com/u/7551586?s=64&v=4)](https://github.com/jhallard)
- [![@sorinsuciu-msft](https://avatars.githubusercontent.com/u/12627402?s=64&v=4)](https://github.com/sorinsuciu-msft)
- [![@cmurtz-msft](https://avatars.githubusercontent.com/u/120655914?s=64&v=4)](https://github.com/cmurtz-msft)

[\+ 117 contributors](https://github.com/openai/openai-python/graphs/contributors)

## Languages

- [Python99.8%](https://github.com/openai/openai-python/search?l=python)
- Other0.2%

You can’t perform that action at this time.
